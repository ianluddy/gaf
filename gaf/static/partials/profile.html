<div id="profile" ng-controller="TabController">
    <div ng-init="sel('info')" class="tab-wrapper col-md-3">
        <ul class="nav nav-pills nav-stacked">
            <li role="presentation" ng-class="{active: chk('info')}" ng-click="sel('info')">
                <a>Information</a>
            </li>
            <li role="presentation" ng-class="{active: chk('photo')}" ng-click="sel('photo')">
                <a>Photo</a>
            </li>
            <li role="presentation" ng-class="{active: chk('password')}" ng-click="sel('password')">
                <a>Password</a>
            </li>
        </ul>
    </div>
    <div class="col-md-9" ng-controller="ProfileController">
        <div ng-show="selectedTab == 'photo'">
            <div class="panel panel-default">
                <div class="panel-heading">Photo</div>
                <div class="panel-body">
                    <div flow-init="{singleFile:true, target: 'api/user/image', chunkSize: 4000000, testChunks:false}"
                         flow-file-added="validateUpload($file)"
                         flow-files-submitted="$flow.upload(); "
                         flow-file-success="handleSuccess($message)"
                         flow-file-error="handleError($message)"
                         class="ng-scope">
                        <div class="drop" flow-drop="" ng-class="dropClass">
                            <span class="btn btn-default" flow-btn="">Upload File
                                <input type="file" style="visibility: hidden; position: absolute;"></span>
                            <b>OR</b>
                            Drag And Drop your file here
                        </div>
                        <br>
                        <div>
                            <div class="progress progress-striped" ng-class="{active: $flow.files[0].isUploading()}">
                                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0"
                                     aria-valuemax="100" ng-style="{width: ($flow.files[0].progress() * 100) + '%'}"
                                     style="width: 0%;">
                                    <span class="sr-only ng-binding">1% Complete</span>
                                </div>
                            </div>
                            <div class="thumbnail" ng-if="profile.image" >
                                <img src="/static/img/profile/{{ profile.image }}" flow-btn="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="selectedTab == 'info'">
            <div class="panel panel-default">
                <div class="panel-heading">Public Information</div>
                <div class="panel-body">
                    <div class="form-group row">
                        <label for="example-text-input" class="col-xs-2 col-form-label">First Name</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="text" ng-model="profile.first">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="example-search-input" class="col-xs-2 col-form-label">Last Name</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="text" ng-model="profile.last">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="example-search-input" class="col-xs-2 col-form-label">About Me</label>
                        <div class="col-xs-10">
                            <textarea class="form-control" placeholder="Tell people about yourself" rows="4" type="text"
                                      ng-model="profile.intro"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">Private Information</div>
                <div class="panel-body">
                    <div class="form-group row">
                        <label for="example-email-input" class="col-xs-2 col-form-label">Email</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="text" ng-model="profile.email">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="example-email-input" class="col-xs-2 col-form-label">Phone</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="text" ng-model="profile.phone">
                        </div>
                    </div>
                    <!-- Todo - birthday? -->
                </div>
            </div>

            <button type="button" class="btn btn-primary pull-right" ng-click="updateProfile()">Update</button>
        </div>

        <div ng-show="selectedTab == 'password'">
            <div class="panel panel-default">
                <div class="panel-heading">Change Password</div>
                <div class="panel-body">
                    <div class="form-group row">
                        <label for="example-text-input" class="col-xs-2 col-form-label">Current Password</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="password" ng-model="password.current">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="example-search-input" class="col-xs-2 col-form-label">New Password</label>
                        <div class="col-xs-10">
                            <input class="form-control" type="password" ng-model="password.new">
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" class="btn btn-primary pull-right" ng-click="updatePassword()">Update</button>
        </div>
    </div>
</div>

